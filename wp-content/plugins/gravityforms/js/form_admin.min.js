jQuery(document).ready(function(b){gaddon.init();if(b(document).on)b(document).on("change",".gfield_rule_value_dropdown",function(){SetRuleValueDropDown(b(this))});else b(".gfield_rule_value_dropdown").live("change",function(){SetRuleValueDropDown(b(this))});"undefined"!=typeof form&&new gfMergeTagsObj(form)});
function ToggleConditionalLogic(b,a){var c=b?"":"slow";if(jQuery("#"+a+"_conditional_logic").is(":checked")){var e=GetConditionalObject(a);CreateConditionalLogic(a,e);SetConditionalProperty(a,"actionType",jQuery("#"+a+"_action_type").val());SetConditionalProperty(a,"logicType",jQuery("#"+a+"_logic_type").val());SetRule(a,0);jQuery("#"+a+"_conditional_logic_container").show(c)}else jQuery("#"+a+"_conditional_logic_container").hide(c)}
function GetConditionalObject(b){var a=!1;switch(b){case "page":case "field":a=GetSelectedField();break;case "next_button":a=GetSelectedField().nextButton;break;case "confirmation":a=confirmation;break;case "notification":a=current_notification;break;default:a="undefined"!=typeof form?form.button:!1}return a=gform.applyFilters("gform_conditional_object",a,b)}
function CreateConditionalLogic(b,a){a.conditionalLogic||(a.conditionalLogic=new ConditionalLogic);var c="hide"==a.conditionalLogic.actionType?"selected='selected'":"",e="show"==a.conditionalLogic.actionType?"selected='selected'":"",d="all"==a.conditionalLogic.logicType?"selected='selected'":"",h="any"==a.conditionalLogic.logicType?"selected='selected'":"",g;g="field"==b?gf_vars.thisFieldIf:"page"==b?gf_vars.thisPage:"confirmation"==b?gf_vars.thisConfirmation:"notification"==b?gf_vars.thisNotification:
gf_vars.thisFormButton;g=gform.applyFilters("gform_conditional_logic_description",g,a);c="<select id='"+b+"_action_type' onchange='SetConditionalProperty(\""+b+"\", \"actionType\", jQuery(this).val());'><option value='show' "+e+">"+gf_vars.show+"</option><option value='hide' "+c+">"+gf_vars.hide+"</option></select>";c=c+g+("<select id='"+b+"_logic_type' onchange='SetConditionalProperty(\""+b+"\", \"logicType\", jQuery(this).val());'><option value='all' "+d+">"+gf_vars.all+"</option><option value='any' "+
h+">"+gf_vars.any+"</option></select>");c+=" "+gf_vars.ofTheFollowingMatch;for(d=0;d<a.conditionalLogic.rules.length;d++){h="is"==a.conditionalLogic.rules[d].operator?"selected='selected'":"";g="isnot"==a.conditionalLogic.rules[d].operator?"selected='selected'":"";var e=">"==a.conditionalLogic.rules[d].operator?"selected='selected'":"",k="<"==a.conditionalLogic.rules[d].operator?"selected='selected'":"",n="contains"==a.conditionalLogic.rules[d].operator?"selected='selected'":"",q="starts_with"==a.conditionalLogic.rules[d].operator?
"selected='selected'":"",p="ends_with"==a.conditionalLogic.rules[d].operator?"selected='selected'":"",c=c+("<div width='100%'>"+GetRuleFields(b,d,a.conditionalLogic.rules[d].fieldId)),c=c+("<select id='"+b+"_rule_operator_"+d+"' onchange='SetRuleProperty(\""+b+'", '+d+", \"operator\", jQuery(this).val());'><option value='is' "+h+">"+gf_vars.is+"</option><option value='isnot' "+g+">"+gf_vars.isNot+"</option><option value='>' "+e+">"+gf_vars.greaterThan+"</option><option value='<' "+k+">"+gf_vars.lessThan+
"</option><option value='contains' "+n+">"+gf_vars.contains+"</option><option value='starts_with' "+q+">"+gf_vars.startsWith+"</option><option value='ends_with' "+p+">"+gf_vars.endsWith+"</option></select>"),c=c+GetRuleValues(b,d,a.conditionalLogic.rules[d].fieldId,a.conditionalLogic.rules[d].value),c=c+("<img src='"+gf_vars.baseUrl+"/images/add.png' class='add_field_choice' title='add another rule' alt='add another rule' style='cursor:pointer; margin:0 3px;' onclick=\"InsertRule('"+b+"', "+(d+1)+
');" />');1<a.conditionalLogic.rules.length&&(c+="<img src='"+gf_vars.baseUrl+"/images/remove.png' title='remove this rule' alt='remove this rule' class='delete_field_choice' style='cursor:pointer;' onclick=\"DeleteRule('"+b+"', "+d+');" /></li>');c+="</div>"}jQuery("#"+b+"_conditional_logic_container").html(c);jQuery.Placeholder.init()}
function GetRuleFields(b,a,c){b="<select id='"+b+"_rule_field_"+a+"' class='gfield_rule_select' onchange='jQuery(\"#"+b+"_rule_value_"+a+'").replaceWith(GetRuleValues("'+b+'", '+a+', jQuery(this).val())); SetRule("'+b+'", '+a+"); '>";for(a=0;a<form.fields.length;a++)IsConditionalLogicField(form.fields[a])&&(b+="<option value='"+form.fields[a].id+"' "+(form.fields[a].id==c?"selected='selected'":"")+">"+(form.fields[a].adminLabel?form.fields[a].adminLabel:form.fields[a].label)+"</option>");return b+
"</select>"}function IsConditionalLogicField(b){inputType=b.inputType?b.inputType:b.type;var a=0<=jQuery.inArray(inputType,"checkbox radio select text website textarea email hidden number phone multiselect post_title post_tags post_custom_field post_content post_excerpt".split(" "))?!0:!1;return a=gform.applyFilters("gform_is_conditional_logic_field",a,b)}
function GetRuleValues(b,a,c,e){0==c&&(c=GetFirstRuleField());if(0==c)return"";c=GetFieldById(c);if(!c)return"";var d="";if("post_category"==c.type&&c.displayAllCategories){var h=b+"_rule_value_"+a;c=jQuery("#"+h+".gfield_category_dropdown");0<c.length?(c=c.html(),c=c.replace('value="'+e+'"','value="'+e+'" selected="selected"'),d="<select id='"+h+"' class='gfield_rule_select gfield_rule_value_dropdown gfield_category_dropdown'>"+c+"</select>"):(jQuery.post(ajaxurl,{action:"gf_get_post_categories",
objectType:b,ruleIndex:a,selectedValue:e},function(c){c&&(jQuery("#gfield_ajax_placeholder_"+a).replaceWith(c.trim()),SetRuleProperty(b,a,"value",jQuery("#"+h).val()))}),d="<select id='gfield_ajax_placeholder_"+a+"' class='gfield_rule_select'><option>"+gf_vars.loading+"</option></select>")}else c.choices?d=GetRuleValuesDropDown(c.choices,b,a,e):(e=e?e.replace(/'/g,"&#039;"):"",d="<input type='text' placeholder='"+gf_vars.enterValue+"' class='gfield_rule_select' id='"+b+"_rule_value_"+a+"' value='"+
e.replace(/'/g,"&#039;")+"' onchange='SetRuleProperty(\""+b+'", '+a+', "value", jQuery(this).val());\' onkeyup=\'SetRuleProperty("'+b+'", '+a+', "value", jQuery(this).val());\'>');return d}function GetFirstRuleField(){for(var b=0;b<form.fields.length;b++)if(IsConditionalLogicField(form.fields[b]))return form.fields[b].id;return 0}
function GetRuleValuesDropDown(b,a,c,e){str="<select class='gfield_rule_select gfield_rule_value_dropdown' id='"+a+"_rule_value_"+c+"'>";a=!1;for(c=0;c<b.length;c++){var d="undefined"==typeof b[c].value||null==b[c].value?b[c].text+"":b[c].value+"",h=d==e,g=h?"selected='selected'":"";h&&(a=!0);str+="<option value='"+d.replace(/'/g,"&#039;")+"' "+g+">"+b[c].text+"</option>"}!a&&(e&&""!=e)&&(str+="<option value='"+e.replace(/'/g,"&#039;")+"' selected='selected'>"+e+"</option>");return str+="</select>"}
function SetRuleProperty(b,a,c,e){GetConditionalObject(b).conditionalLogic.rules[a][c]=e}function GetFieldById(b){b=parseInt(b);for(var a=0;a<form.fields.length;a++)if(form.fields[a].id==b)return form.fields[a];return null}function SetConditionalProperty(b,a,c){GetConditionalObject(b).conditionalLogic[a]=c}function SetRuleValueDropDown(b){var a=b.attr("id").split("_rule_value_");2>a.length||SetRuleProperty(a[0],a[1],"value",b.val())}
function InsertRule(b,a){var c=GetConditionalObject(b);c.conditionalLogic.rules.splice(a,0,new ConditionalRule);CreateConditionalLogic(b,c);SetRule(b,a)}function SetRule(b,a){SetRuleProperty(b,a,"fieldId",jQuery("#"+b+"_rule_field_"+a).val());SetRuleProperty(b,a,"operator",jQuery("#"+b+"_rule_operator_"+a).val());SetRuleProperty(b,a,"value",jQuery("#"+b+"_rule_value_"+a).val())}
function DeleteRule(b,a){var c=GetConditionalObject(b);c.conditionalLogic.rules.splice(a,1);CreateConditionalLogic(b,c)}function TruncateRuleText(b){return!b||18>=b.length?b:b.substr(0,9)+"..."+b.substr(b.length-8,9)}
function gfAjaxSpinner(b,a,c){this.elem=b;this.image='<img class="gfspinner" src="'+("undefined"==typeof a?"/images/ajax-loader.gif":a)+'" style="'+("undefined"!=typeof c?c:"")+'" />';this.init=function(){this.spinner=jQuery(this.image);jQuery(this.elem).after(this.spinner);return this};this.destroy=function(){jQuery(this.spinner).remove()};return this.init()}
function InsertVariable(b,a,c){c||(c=jQuery("#"+b+"_variable_select").val());var e=jQuery("#"+b);document.selection?(e[0].focus(),document.selection.createRange().text=c):e[0].selectionStart?(obj=e[0],obj.value=obj.value.substr(0,obj.selectionStart)+c+obj.value.substr(obj.selectionEnd,obj.value.length)):e.val(c+e.val());e=jQuery("#"+b+"_variable_select");0<e.length&&(e[0].selectedIndex=0);a&&window[a]&&window[a].call(null,b,c)}
function InsertEditorVariable(b,a){if(!a){var c=jQuery("#"+b+"_variable_select");c[0].selectedIndex=0;a=c.val()}wpActiveEditor=b;window.send_to_editor(a)}function GetInputType(b){return b.inputType?b.inputType:b.type}function HasPostField(){for(var b=0;b<form.fields.length;b++){var a=form.fields[b].type;if("post_title"==a||"post_content"==a||"post_excerpt"==a)return!0}return!1}
function GetInput(b,a){if("undefined"!=typeof b.inputs&&jQuery.isArray(b.inputs))for(i in b.inputs){var c=b.inputs[i];if(c.id==a)return c}return null}function IsPricingField(b){return IsProductField(b)||"donation"==b}function IsProductField(b){return-1!=jQuery.inArray(b,"option quantity product total shipping calculation".split(" "))}
function GetLabel(b,a,c){"undefined"==typeof a&&(a=0);"undefind"==typeof c&&(c=!1);a=GetInput(b,a);return"checkbox"==b.type&&null!=a?a.label:null!=a?c?a.label:b.label+" ("+a.label+")":b.label}function DeleteNotification(b){jQuery("#action_argument").val(b);jQuery("#action").val("delete");jQuery("#notification_list_form")[0].submit()}function DeleteConfirmation(b){jQuery("#action_argument").val(b);jQuery("#action").val("delete");jQuery("#confirmation_list_form")[0].submit()}
function SetConfirmationConditionalLogic(b){confirmation.conditionalLogic="undefined"==typeof b?jQuery("#conditional_logic").val()?jQuery.parseJSON(jQuery("#conditional_logic").val()):null:b?new ConditionalLogic:null}
function ToggleConfirmation(){var b,a="";b=jQuery("#form_confirmation_redirect").is(":checked");a=jQuery("#form_confirmation_show_page").is(":checked");b?(b=".form_confirmation_redirect_container",a="#form_confirmation_message_container, #form_confirmation_page_container",ClearConfirmationSettings(["text","page"])):a?(b="#form_confirmation_page_container",a="#form_confirmation_message_container, .form_confirmation_redirect_container",ClearConfirmationSettings(["text","redirect"])):(b="#form_confirmation_message_container",
a="#form_confirmation_page_container, .form_confirmation_redirect_container",ClearConfirmationSettings(["page","redirect"]));ToggleQueryString();jQuery(a).hide();jQuery(b).show()}function ToggleQueryString(){jQuery("#form_redirect_use_querystring").is(":checked")?jQuery("#form_redirect_querystring_container").show():(jQuery("#form_redirect_querystring_container").hide(),jQuery("#form_redirect_querystring").val(""),jQuery("#form_redirect_use_querystring").val(""))}
function ClearConfirmationSettings(b){b=jQuery.isArray(b)?b:[b];for(i in b)switch(b[i]){case "text":jQuery("#form_confirmation_message").val("");jQuery("#form_disable_autoformatting").prop("checked",!1);break;case "page":jQuery("#form_confirmation_page").val("");break;case "redirect":jQuery("#form_confirmation_url").val(""),jQuery("#form_redirect_querystring").val(""),jQuery("#form_redirect_use_querystring").prop("checked",!1)}}
function StashConditionalLogic(){var b=JSON.stringify(confirmation.conditionalLogic);jQuery("#conditional_logic").val(b)}function ConfirmationObj(){this.id=!1;this.name=gf_vars.confirmationDefaultName;this.type="message";this.message=gf_vars.confirmationDefaultMessage;this.isDefault=0}
(function(b,a,c){b.init=function(){f=window.form;var a;a="undefined"!=typeof f?!0:!1;id=a?f.id:0};b.toggleFeedActive=function(a,b,c){var g=0<=a.src.indexOf("active1.png")?0:1;a.src=a.src.replace("active1.png","spinner.gif");a.src=a.src.replace("active0.png","spinner.gif");jQuery.post(ajaxurl,{action:"gf_feed_is_active_"+b,feed_id:c,is_active:g},function(b){g?(a.src=a.src.replace("spinner.gif","active1.png"),jQuery(a).attr("title",gf_vars.inactive).attr("alt",gf_vars.inactive)):(a.src=a.src.replace("spinner.gif",
"active0.png"),jQuery(a).attr("title",gf_vars.active).attr("alt",gf_vars.active))});return!0};b.deleteFeed=function(b){a("#single_action").val("delete");a("#single_action_argument").val(b);a("#gform-settings").submit()}})(window.gaddon=window.gaddon||{},jQuery);function Copy(b){if(b){if("object"!=typeof b)return b}else return b;b=jQuery.isArray(b)?b.slice():jQuery.extend({},b);for(i in b)b[i]=Copy(b[i]);return b}
var gfMergeTagsObj=function(b){this.form=b;this.init=function(){var a=this;this.mergeTagList=jQuery('<ul id="gf_merge_tag_list" class=""></ul>');this.mergeTagListHover=!1;0>=jQuery(".merge-tag-support").length||(jQuery(".merge-tag-support").bind("keydown",function(a){a.keyCode===jQuery.ui.keyCode.TAB&&jQuery(this).data("autocomplete").menu.active&&a.preventDefault()}).each(function(){var b=jQuery(this),e=b.is("input")?"input":"textarea";b.autocomplete({minLength:1,source:function(d,e){var k=a.extractLast(d.term);
if(k.length<b.autocomplete("option","minLength"))e([]);else{var n=jQuery.map(a.getAutoCompleteMergeTags(b),function(b){return a.startsWith(b,k)?b:null});e(n)}},focus:function(){return!1},select:function(b,c){var d=a.split(this.value);d.pop();d.push(c.item.value);this.value=d.join(" ");return!1}});var d=a.getClassProperty(this,"position"),e=jQuery('<span class="all-merge-tags '+d+" "+e+'"><a class="open-list tooltip-merge-tag" tooltip="'+gf_vars.mergeTagsTooltip+'">All Merge Tags</a></span>');e.data("targetElement",
b.attr("id"));a.getClassProperty(this,"manual_position")?(d=".mt-"+b.attr("id"),jQuery(d).append(e)):b.after(e)}),jQuery(".tooltip-merge-tag").each(function(){var a=gform_get_tooltip_options(this,"gformsstyle_left","topLeft","bottomRight");a.show.delay=1250;gform_apply_tooltip(this,a)}),jQuery(".all-merge-tags a.open-list").click(function(){var b=jQuery(this),e=a.getTargetElement(b);a.mergeTagList.html(a.getMergeTagListItems(e));a.mergeTagList.insertAfter(b).show();jQuery("ul#gf_merge_tag_list a").click(function(){var b=
jQuery(this).data("value"),c=a.getTargetElement(this);a.isWpEditor(c)?InsertEditorVariable(c.attr("id"),b):InsertVariable(c.attr("id"),null,b);c.change();a.mergeTagList.hide()})}),this.getTargetElement=function(a){a=jQuery(a);return jQuery("#"+a.parents("span.all-merge-tags").data("targetElement"))},this.mergeTagList.hover(function(){a.mergeTagListHover=!0},function(){a.mergeTagListHover=!1}),jQuery("body").mouseup(function(){a.mergeTagListHover||a.mergeTagList.hide()}))};this.split=function(a){return a.split(" ")};
this.extractLast=function(a){return this.split(a).pop()};this.startsWith=function(a,b){return 0===a.indexOf(b)};this.getMergeTags=function(a,b,e,d,h,g){"undefined"==typeof a&&(a=[]);"undefined"==typeof d&&(d=[]);var k=[],n=[],q=[],p=[],s=[],t=[],u=[],l=[],v=[];e||p.push({tag:"{all_fields}",label:this.getMergeTagLabel("{all_fields}")});if(!h){for(i in a){var m=a[i];if(!m.displayOnly){var r=GetInputType(m);if(-1==jQuery.inArray(r,d)){if(m.isRequired)switch(r){case "name":r=Copy(m);if("extended"==m.nameFormat){var x=
GetInput(m,m.id+".2"),y=GetInput(m,m.id+".8"),w=Copy(m);w.inputs=[x,y];n.push(w);delete r.inputs[0];delete r.inputs[3]}k.push(r);break;default:k.push(m)}else n.push(m);IsPricingField(m.type)&&q.push(m)}}}if(0<k.length)for(i in k)s=s.concat(this.getFieldMergeTags(k[i],g));if(0<n.length)for(i in n)t=t.concat(this.getFieldMergeTags(n[i],g));if(0<q.length)for(i in e||u.push({tag:"{pricing_fields}",label:this.getMergeTagLabel("{pricing_fields}")}),q)u.concat(this.getFieldMergeTags(q[i],g))}l.push({tag:"{ip}",
label:this.getMergeTagLabel("{ip}")});l.push({tag:"{date_mdy}",label:this.getMergeTagLabel("{date_mdy}")});l.push({tag:"{date_dmy}",label:this.getMergeTagLabel("{date_dmy}")});l.push({tag:"{embed_post:ID}",label:this.getMergeTagLabel("{embed_post:ID}")});l.push({tag:"{embed_post:post_title}",label:this.getMergeTagLabel("{embed_post:post_title}")});l.push({tag:"{embed_url}",label:this.getMergeTagLabel("{embed_url}")});l.push({tag:"{entry_id}",label:this.getMergeTagLabel("{entry_id}")});l.push({tag:"{entry_url}",
label:this.getMergeTagLabel("{entry_url}")});l.push({tag:"{form_id}",label:this.getMergeTagLabel("{form_id}")});l.push({tag:"{form_title}",label:this.getMergeTagLabel("{form_title}")});l.push({tag:"{user_agent}",label:this.getMergeTagLabel("{user_agent}")});l.push({tag:"{referer}",label:this.getMergeTagLabel("{referer}")});HasPostField()&&!h&&(l.push({tag:"{post_id}",label:this.getMergeTagLabel("{post_id}")}),l.push({tag:"{post_edit_url}",label:this.getMergeTagLabel("{post_edit_url}")}));l.push({tag:"{user:display_name}",
label:this.getMergeTagLabel("{user:display_name}")});l.push({tag:"{user:user_email}",label:this.getMergeTagLabel("{user:user_email}")});l.push({tag:"{user:user_login}",label:this.getMergeTagLabel("{user:user_login}")});a=this.getCustomMergeTags();if(0<a.tags.length)for(i in a.tags)k=a.tags[i],v.push({tag:k.tag,label:k.label});p={ungrouped:{label:this.getMergeGroupLabel("ungrouped"),tags:p},required:{label:this.getMergeGroupLabel("required"),tags:s},optional:{label:this.getMergeGroupLabel("optional"),
tags:t},pricing:{label:this.getMergeGroupLabel("pricing"),tags:u},other:{label:this.getMergeGroupLabel("other"),tags:l},custom:{label:this.getMergeGroupLabel("custom"),tags:v}};return p=gform.applyFilters("gform_merge_tags",p,b,e,d,h,g)};this.getMergeTagLabel=function(a){for(groupName in gf_vars.mergeTags){var b=gf_vars.mergeTags[groupName].tags;for(i in b)if(b[i].tag==a)return b[i].label}return""};this.getMergeGroupLabel=function(a){return gf_vars.mergeTags[a].label};this.getFieldMergeTags=function(a,
b){"undefined"==typeof b&&(b="");var e=[],d=GetInputType(a),h="list"==d?":"+b:"",g="",k="";if("undefined"!=typeof a.inputs&&jQuery.isArray(a.inputs))for(i in"checkbox"==d&&(k=GetLabel(a,a.id).replace("'","\\'"),g="{"+k+":"+a.id+h+"}",e.push({tag:g,label:k})),a.inputs)d=a.inputs[i],k=GetLabel(a,d.id).replace("'","\\'"),g="{"+k+":"+d.id+h+"}",e.push({tag:g,label:k});else k=GetLabel(a).replace("'","\\'"),g="{"+k+":"+a.id+h+"}",e.push({tag:g,label:k});return e};this.getCustomMergeTags=function(){for(groupName in gf_vars.mergeTags)if("custom"==
groupName)return gf_vars.mergeTags[groupName];return[]};this.getAutoCompleteMergeTags=function(a){var b=this.form.fields,e=a.attr("id"),d=!0==this.getClassProperty(a,"hide_all_fields"),h=this.getClassProperty(a,"exclude"),g=this.getClassProperty(a,"option");(a=this.getClassProperty(a,"prepopulate"))&&(d=!0);b=this.getMergeTags(b,e,d,h,a,g);e=[];for(group in b)for(i in d=b[group].tags,d)e.push(d[i].tag);return e};this.getMergeTagListItems=function(a){var b=this.form.fields,e=a.attr("id"),d=!0==this.getClassProperty(a,
"hide_all_fields"),h=this.getClassProperty(a,"exclude"),g=this.getClassProperty(a,"prepopulate");a=this.getClassProperty(a,"option");g&&(d=!0);b=this.getMergeTags(b,e,d,h,g,a);e=this.hasMultipleGroups(b);d="";for(group in b)if(g=b[group].label,h=b[group].tags,!(0>=h.length))for(i in g&&e&&(d+='<li class="group-header">'+g+"</li>"),h)g=h[i],d+='<li class=""><a class="" data-value="'+g.tag+'">'+g.label+"</a></li>";return d};this.hasMultipleGroups=function(a){var b=0;for(group in a)0<a[group].tags.length&&
b++;return 1<b};this.getClassProperty=function(a,b){a=jQuery(a);var e=a.attr("class");if(!e)return"";e=e.split(" ");for(i in e){var d=e[i].split("-");if(!("mt"!=d[0]||d[1]!=b))return 3<d.length?(delete d[0],delete d[1],d):2==d.length?!0:d[2]}return""};this.isWpEditor=function(a){a=jQuery(a);return!0==this.getClassProperty(a,"wp_editor")};this.init()};
